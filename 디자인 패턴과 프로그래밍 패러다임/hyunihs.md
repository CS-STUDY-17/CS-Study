# 디자인 패턴
디자인 패턴이란, 프로그램을 설계할 때 발생했던 문제점들을 
객체 간의 상호 관계 등을 이용해 해결할 수 있도록 하나의 규약 형태로 만들어 놓은 것

## 싱글톤 패턴
- 하나의 클래스 기반으로 오직 하나의 인스턴스
- 보통 데이터베이스 연결 모듈에 많이 사용
### 장점
- 사용하기 쉽고 실용적이다
### 단점
- 모듈 간의 결합을 강하게 만든다
  - 의존성 주입 (DI, Dependency Injection) 통해 해결 (결합을 느슨하게 만듦)
- TDD(Test Driven Development) 할 때 단위 테스트 만들기 어렵다
  - 각 테스트마다 독립적인 인스턴스 만들어야 하는데 미리 생성된 하나의 인스턴스를 기반으로 구현하는 패턴이므로

### 의존성 주입
> A가 B에 의존성이 있다 = B의 변경 사항에 A도 변해야 한다

| 의존성 주입 X                | 의존성 주입 O                               |
|-------------------------|----------------------------------------|
| 메인 모듈이 직접 하위 모듈에 의존성 주기 | 의존성 주입자를 통해 메인 모듈이 간접적으로 하위 모듈에 의존성 주입 |

![image-3](https://github.com/CS-STUDY-17/CS-Study/assets/86969518/12c0372a-5d00-4e9a-b898-f965f22b334e)

#### 장점
- 모듈 간 결합 느슨해짐
- 테스팅, 마이그레이션 쉬워짐
- 일관된 의존성 방향, 모듈 간 명확한 관계, 쉽게 추론 가능: 유지 보수 쉬워짐

#### 단점
- 모듈 분리되며 클래스 수 늘어나 복잡해질 수 있음
- 약간의 린 타임 페널티

#### 원칙
- 상위 모듈은 하위 모듈에서 어떠한 것도 가져오지 말아야 한다
- 상위 모듈, 하위 모듈은 둘다 추상화에 의존해야 하며, 추상화는 세부 사항에 의존하지 말아야 한다


## 팩토리 패턴
- 객체 생성 부분을 떼어내 추상화
- 상속 관계에 있는 두 클래스에서 상위 클래스가 뼈대를 결정하고, 하위 클래스가 객체 생성에 관한 구체적인 내용을 결정
- 느슨한 결함 & 유연성 & 유지보수성

## 전략 패턴
- 전략 패턴 (strategy pattern) = 정책 패턴 (policy pattern)
- 전략 = '캡슐화한 알고리즘'
- 객체의 행위를 바꿀 때 직접 수정하지 않고 컨텍스트 내 전략을 바꿈

## 옵저버 패턴
- 주체가 어떤 객체(subject)의 상태 변화를 관찰하고 상태 변화가 있을 때마다 메서드 등을 통해 옵저버들에게 변화를 알려줌
- 주체와 관찰 객체의 구분 없이 하나의 객체가 두 역할을 하는 경우도 있다
- 트위터: 팔로워들에게 알림
- 이벤트 기반 시스템
- MVC 패턴: model의 변경사항 → 옵저버인 뷰에 알려줌 → 이를 기반으로 컨트롤러 작동

### 참고) 자바의 상속과 구현
- 상속(extends)
  - 자식 클래스가 부모 클래스의 메서드 상속받아 사용 (추가 및 확장 가능)
  - 일반 클래스, abstract 클래스 기반 구현
- 구현(implements)
  - 부모 인터페이스를 자식 클래스에서 재정의해 구현 (반드시)
  - 인터페이스 기반 구현

### 자바스크립트에서의 옵저버 패턴
- 프록시 객체 이용: 매개변수로 target, handler

## 프록시 패턴과 프록시 서버
### 프록시 패턴
- 대상 객체(subject)에 접근하기 전 그 접근에 대한 흐름을 가로채 대상 객체 앞단의 인터페이스 역할을 하는 디자인 패턴

### 프록시 서버
- 서버와 클라이언트 사이에서 클라이언트가 자신을 통해 다른 네트워크 서비스에 간접적으로 접속할 수 있게 해주는 컴퓨터 시스템이나 응용 프로그램
- nginx: 비동기 이벤트 기반의 구조와 다수의 연결 효과적으로 처리하는 웹 프록시 서버
  - Node.js 앞단에 많이 둠
- CloudFlare: 웹 서버 앞단에 두고 DDOS 공격 방어나 HTTPS 구축에 쓰임
- 프론트엔드 서버 앞단에 프록시 서버를 두어 cors를 해결하기도 함 (포트 변경)

## 이터레이터 패턴
- 여러 자료형을 하나의 이터레이터로 순회 가능

## 노출 모듈 패턴
- 즉시 실행 함수를 통해 private, public 등의 접근 제어자를 만드는 패턴 (자바 스크립트는 접근 제어자가 존재하지 않아서 노출 모듈 패턴을 통해 구현하기도 함)